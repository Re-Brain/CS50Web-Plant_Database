{% load static %}
    
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'application/list.css'%}">
{% endblock %}

{% block body %}

    {% if title %}
        <div class="container">
            <h1>{{ title }}</h1>
        </div>
    {% endif %}

    {% include "application/nav.html" %} 

    <div class="container" id="list">
        <div class="row p-3 border row-display mt-3 mb-3">
            <div class="col">
            <h5>Name</h5>
            </div>
            <div class="col">
            <h5>Scientific Name</h5>
            </div>
            <div class="col">
            <h5>Family Name</h5>
            </div>
            <div class="col">
            <h5>Common Name</h5>
            </div>
            {% if admin %}
            <div class="col"></div>
            {% endif %}
        </div>

        {% for plant in venues %}
            <a href="{% url 'plant' id=plant.id %}" class="plant">
                <div class="row p-3 border row-display mt-3 mb-3">
                    <div class="col">
                        {{ plant.name }}
                    </div>
                    <div class="col">
                        {{ plant.scientificName }}
                    </div>
                    <div class="col">
                        {% if plant.familyNameList.exists %}
                            {% for name in plant.familyNameList.all %}
                                {{ name }}{% if not forloop.last %},{% endif %}               
                            {% endfor %}
                        {% else %}
                            <p>-</p>
                        {% endif %}
                    </div>
                    <div class="col">
                        {% if plant.commonNameList.exists %}
                            {% for name in plant.commonNameList.all %}
                                {{ name }}{% if not forloop.last %},{% endif %}               
                            {% endfor %}
                        {% else %}
                            <p>-</p>
                        {% endif %}
                    </div>
                    {% if admin %}
                        <div class="col">
                            <button class="btn btn-primary btn-sm edit" onclick="editPlant(event, '{{ plant.id }}')">Edit</button>
                            <button class="btn btn-primary btn-sm delete" onclick="deletePlant(event, '{{ plant.id }}')">Delete</button>
                        </div>
                    {% endif %}
                </div> 
            </a>    
        {% endfor %}
    </div>

    {% include "application/nav.html" %} 

    <div class="popup" id="customPopup">
        <div class="popup-content">
            <h5 class="m-2">Are you sure you want to delete this plant?</h5>
            <div class="mt-3">
                    <button class="btn btn-primary btn-sm me-1" onclick="confirmDelete()" data-plant-id="" id="confirm">Confirm</button>
                    <button class="btn btn-primary btn-sm ms-1" onclick="closePopup()" id="cancel">Cancel</button>
            </div>
           
        </div>
    </div>

{% endblock %}

{% block script %}
    <script src="{% static  'application/list.js' %}"></script>
{% endblock %}